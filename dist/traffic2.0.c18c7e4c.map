{"version":3,"sources":["util.js","color.js","component/Road.js","component/Car.js","component/Intersections.js","traffic2.0.js"],"names":["window","requestAnimFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","setTimeout","BrowserDetect","init","browser","searchString","dataBrowser","version","searchVersion","navigator","userAgent","appVersion","OS","dataOS","data","i","length","dataString","string","dataProp","prop","versionSearchString","versionSearch","identity","indexOf","subString","index","parseFloat","substring","vendor","opera","platform","isBrowserOk","notify","confirm","notify2","deepCopy","newObj","Array","key","hasOwnProperty","solidLine","dashLine","road","roadEdge","traffic","red","green","defaultRoad","x","y","width","height","direction","num","Road","config","ctx","w","h","fillStyle","color","fillRect","x1","y1","x2","y2","beginPath","setLineDash","moveTo","lineTo","closePath","strokeStyle","lineWidth","fill","stroke","drawRoadEdge","drawRoad","drawSolidLine","space","Math","min","space_1","space_2","drawDashLine","addRoundedRect","Object","getPrototypeOf","rounded_rect","r","quadraticCurveTo","defaultCar","s","l","d","dd","Car","car","axis","c1","c2","dist","disty","inter","c","rand_dir","random","dir","rand_no1","rand_no2","roadbottom","roadright","roadtop","roadleft","rotate","PI","Intersections","roadNum","roads","intersections_arr","j","r1","r2","push","Intersection","lightNumH","lightNumV","defaultInter","options","setTraffic","left_green","right","left","top","bottom","light","shadow_color","save","diff","max","shadowColor","restore","drawZebraCross","drawStopLine","drawTrafficLight","canvas","document","getElementsByTagName","getContext","console","log","documentElement","clientWidth","clientHeight","cars","roadConfig","left_greenc","setInterval","roadTotal","car_no","randomRoad","color_rand","map","drawscene","clearRect","forEach","draw","intersection","drive_cars","carCount","dc","check_distance","k","lc","ld","v","counter","check_inter","gen_dir","isPlay","btnEl","getElementById","onclick","innerHTML","animloop"],"mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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MAAP;AACD,CAZD;QAaSnC,gBAAAA;QAAe8B,cAAAA;QAAaI,WAAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kBCrKtB;AACbK,aAAW,SADE;AAEbC,YAAU,SAFG;AAGbC,QAAM,SAHO;AAIbC,YAAU,SAJG;AAKbC,WAAS;AACPC,SAAK,mBADE;AAEPC,WAAO;AAFA;AALI","file":"traffic2.0.c18c7e4c.map","sourceRoot":"..","sourcesContent":["// 兼容rAF\nwindow.requestAnimFrame = (function() {\n  return (\n    window.requestAnimationFrame ||\n    window.webkitRequestAnimationFrame ||\n    window.mozRequestAnimationFrame ||\n    window.oRequestAnimationFrame ||\n    window.msRequestAnimationFrame ||\n    function(callback) {\n      window.setTimeout(callback, 1000 / 60);\n    }\n  );\n})();\n\n// 设备检测\nconst BrowserDetect = {\n  init: function() {\n    this.browser = this.searchString(this.dataBrowser) || 'An unknown browser';\n    this.version =\n      this.searchVersion(navigator.userAgent) ||\n      this.searchVersion(navigator.appVersion) ||\n      'an unknown version';\n    this.OS = this.searchString(this.dataOS) || 'an unknown OS';\n  },\n  searchString: function(data) {\n    for (let i = 0; i < data.length; i++) {\n      let dataString = data[i].string;\n      let dataProp = data[i].prop;\n      this.versionSearchString = data[i].versionSearch || data[i].identity;\n      if (dataString) {\n        if (dataString.indexOf(data[i].subString) != -1)\n          return data[i].identity;\n      } else if (dataProp) return data[i].identity;\n    }\n  },\n  searchVersion: function(dataString) {\n    let index = dataString.indexOf(this.versionSearchString);\n    if (index == -1) return;\n    return parseFloat(\n      dataString.substring(index + this.versionSearchString.length + 1)\n    );\n  },\n  dataBrowser: [\n    {\n      string: navigator.userAgent,\n      subString: 'Chrome',\n      identity: 'Chrome'\n    },\n    {\n      string: navigator.userAgent,\n      subString: 'OmniWeb',\n      versionSearch: 'OmniWeb/',\n      identity: 'OmniWeb'\n    },\n    {\n      string: navigator.vendor,\n      subString: 'Apple',\n      identity: 'Safari',\n      versionSearch: 'Version'\n    },\n    {\n      prop: window.opera,\n      identity: 'Opera',\n      versionSearch: 'Version'\n    },\n    {\n      string: navigator.vendor,\n      subString: 'iCab',\n      identity: 'iCab'\n    },\n    {\n      string: navigator.vendor,\n      subString: 'KDE',\n      identity: 'Konqueror'\n    },\n    {\n      string: navigator.userAgent,\n      subString: 'Firefox',\n      identity: 'Firefox'\n    },\n    {\n      string: navigator.vendor,\n      subString: 'Camino',\n      identity: 'Camino'\n    },\n    {\n      // for newer Netscapes (6+)\n      string: navigator.userAgent,\n      subString: 'Netscape',\n      identity: 'Netscape'\n    },\n    {\n      string: navigator.userAgent,\n      subString: 'MSIE',\n      identity: 'Explorer',\n      versionSearch: 'MSIE'\n    },\n    {\n      string: navigator.userAgent,\n      subString: 'Gecko',\n      identity: 'Mozilla',\n      versionSearch: 'rv'\n    },\n    {\n      // for older Netscapes (4-)\n      string: navigator.userAgent,\n      subString: 'Mozilla',\n      identity: 'Netscape',\n      versionSearch: 'Mozilla'\n    }\n  ],\n  dataOS: [\n    {\n      string: navigator.platform,\n      subString: 'Win',\n      identity: 'Windows'\n    },\n    {\n      string: navigator.platform,\n      subString: 'Mac',\n      identity: 'Mac'\n    },\n    {\n      string: navigator.userAgent,\n      subString: 'iPhone',\n      identity: 'iPhone/iPod'\n    },\n    {\n      string: navigator.platform,\n      subString: 'Linux',\n      identity: 'Linux'\n    }\n  ]\n};\n\nBrowserDetect.init();\n\nlet isBrowserOk = false;\nif (BrowserDetect.browser == 'Firefox') {\n  let notify = confirm(\n    'Firefox seems to have an issue rendering this and can cause your machine to crash, so please use google chrome or safari'\n  );\n  if (notify == true) {\n    let notify2 = confirm('You sure you want to run this?');\n    if (notify2 == true) {\n      isBrowserOk = true;\n    }\n  }\n} else {\n  isBrowserOk = true;\n}\n// 深拷贝\nconst deepCopy = data => {\n  if (typeof data !== 'object') {\n    return data;\n  }\n  let newObj = data instanceof Array ? [] : {};\n  for (let key in data) {\n    if (data.hasOwnProperty(key)) {\n      newObj[key] =\n        typeof data[key] === 'object' ? deepCopy(data[key]) : data[key];\n    }\n  }\n  return newObj;\n};\nexport { BrowserDetect, isBrowserOk, deepCopy };\n","export default {\n  solidLine: '#A68B44',\n  dashLine: '#A09383',\n  road: '#605A4C',\n  roadEdge: '#A09383',\n  traffic: {\n    red: 'rgba(255,0,0,0.4)',\n    green: 'rgba(0,255,0,0.4)'\n  }\n};\n","import color from '../color';\n\nexport const defaultRoad = {\n  x: 0,\n  y: 0,\n  width: 0,\n  height: 0,\n  direction: 'h',\n  num: 0\n};\n\nclass Road {\n  constructor(config) {\n    for (let key in defaultRoad) {\n      this[key] = config[key] || defaultRoad[key];\n    }\n  }\n\n  drawRoadEdge(ctx, x, y, w, h) {\n    ctx.fillStyle = color.roadEdge;\n    ctx.fillRect(x, y, w, h);\n  }\n\n  drawRoad(ctx, x, y, w, h) {\n    ctx.fillStyle = color.road;\n    ctx.fillRect(x, y, w, h);\n  }\n\n  drawSolidLine(ctx, x, y, w, h) {\n    ctx.fillStyle = color.solidLine;\n    ctx.fillRect(x, y, w, h);\n  }\n\n  drawDashLine(ctx, x1, y1, x2, y2) {\n    ctx.beginPath();\n    ctx.setLineDash([2, 5]);\n    ctx.moveTo(x1, y1);\n    ctx.lineTo(x2, y2);\n    ctx.closePath();\n    ctx.strokeStyle = color.dashLine;\n    ctx.lineWidth = 1;\n    ctx.fill();\n    ctx.stroke();\n  }\n\n  draw(ctx) {\n    const { x, y, width: w, height: h, direction, num } = this;\n\n    // roadEdge\n    if (direction === 'h') {\n      this.drawRoadEdge(ctx, x, y - 10, w, h + 20);\n    } else {\n      this.drawRoadEdge(ctx, x - 10, y, w + 20, h);\n    }\n\n    // road\n    this.drawRoad(ctx, x, y, w, h);\n\n    // solidRoad\n    if (direction === 'h') {\n      this.drawSolidLine(ctx, x, y + h / 2 - 1, w, 2);\n    } else {\n      this.drawSolidLine(ctx, x + w / 2 - 1, y, 2, h);\n    }\n\n    // dashRoad\n    if (num > 1) {\n      // 车道宽\n      let space = Math.min(w, h) / num / 2;\n      for (let i = 1; i < num; i++) {\n        let space_1 = space * i - 1,\n          space_2 = space * (num * 2 - i) - 1;\n        if (direction === 'h') {\n          this.drawDashLine(ctx, x, y + space_1, w, y + space_1);\n          this.drawDashLine(ctx, x, y + space_2, w, y + space_2);\n        } else if (direction === 'v') {\n          this.drawDashLine(ctx, x + space_1, y, x + space_1, h);\n          this.drawDashLine(ctx, x + space_2, y, x + space_2, h);\n        }\n      }\n    }\n  }\n}\n\nexport default Road;\n","export const addRoundedRect = ctx => {\n  Object.getPrototypeOf(ctx).rounded_rect = function(x, y, w, h, r) {\n    if (typeof r === 'undefined') {\n      r = 2;\n    }\n    this.beginPath();\n    this.moveTo(x + r, y);\n    this.lineTo(x + w - r, y);\n    this.quadraticCurveTo(x + w, y, x + w, y + r);\n    this.lineTo(x + w, y + h - r);\n    this.quadraticCurveTo(x + w, y + h, x + w - r, y + h);\n    this.lineTo(x + r, y + h);\n    this.quadraticCurveTo(x, y + h, x, y + h - r);\n    this.lineTo(x, y + r);\n    this.quadraticCurveTo(x, y, x + r, y);\n    this.closePath();\n    this.fill();\n  };\n};\n\nexport const defaultCar = {\n  x: 0,\n  y: 0,\n  s: 5,\n  l: 25, //length of vehicle\n  d: 'e',\n  dd: false,\n  color: '#F5D600'\n};\n\nclass Car {\n  constructor() {\n    for (let key in defaultCar) {\n      this[key] = defaultCar[key];\n    }\n  }\n  // 俩车距离确认\n  check_distance(car, axis) {\n    let c1 = this,\n      c2 = car;\n    if (axis == 'x') {\n      var dist = c2.x - c1.x;\n      if (dist > 0 && dist <= c1.l + 15) {\n        if (c2.w > 15 && c1.w > 15 && c1.y == c2.y) {\n          //only check for collison on cars on the same axis\n          return true;\n        }\n      }\n    } else if (axis == '-x') {\n      var dist = c1.x - c2.x;\n      if (dist > 0 && dist <= c1.l + 15) {\n        if (c2.w > 15 && c1.w > 15 && c1.y == c2.y) {\n          //only check for collison on cars on the same axis\n          return true;\n        }\n      }\n    } else if (axis == '-y') {\n      var disty = c1.y - c2.y;\n      if (disty > 0 && disty <= c1.l + 15) {\n        if (c2.w < 25 && c1.w < 25 && c1.x == c2.x) {\n          //only check for collison on cars on the same axis\n          return true;\n        }\n      }\n    } else if (axis == 'y') {\n      var disty = c2.y - c1.y;\n      if (disty > 0 && disty <= c1.l + 15) {\n        if (c2.w < 25 && c1.w < 25 && c1.x == c2.x) {\n          //only check for collison on cars on the same axis\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  // 车与路口关系\n  check_inter(inter, axis) {\n    let c = this;\n    if (axis == 'x') {\n      if (inter.height > 40) {\n        if (inter.x - c.x > c.l + 8 && inter.x - c.x <= c.l + 25) {\n          if (c.y - 80 <= inter.y && c.y + 42 >= inter.y) {\n            return true;\n          }\n        }\n      } else {\n        if (inter.x - c.x > c.l + 8 && inter.x - c.x <= c.l + 25) {\n          if (c.y - 40 <= inter.y && c.y + 42 >= inter.y) {\n            return true;\n          }\n        }\n      }\n    } else if (axis == '-x') {\n      if (inter.height > 40) {\n        if (c.x - inter.x > c.l + 8 && c.x - inter.x <= c.l + inter.width + 5) {\n          if (c.y - 80 <= inter.y && c.y + 42 >= inter.y) {\n            return true;\n          }\n        }\n      } else {\n        if (c.x - inter.x > c.l + 8 && c.x - inter.x <= c.l + inter.width + 5) {\n          if (c.y - 40 <= inter.y && c.y + 42 >= inter.y) {\n            return true;\n          }\n        }\n      }\n    } else if (axis == '-y') {\n      if (inter.width > 40) {\n        if (\n          c.y - inter.y > c.l + 8 &&\n          c.y - inter.y <= c.l + inter.height + 5\n        ) {\n          if (c.x - 80 <= inter.x && c.x + 42 >= inter.x) {\n            return true;\n          }\n        }\n      } else {\n        if (\n          c.y - inter.y > c.l + 8 &&\n          c.y - inter.y <= c.l + inter.height + 5\n        ) {\n          if (c.x - 40 <= inter.x && c.x + 42 >= inter.x) {\n            return true;\n          }\n        }\n      }\n    } else if (axis == 'y') {\n      if (inter.width > 40) {\n        if (inter.y - c.y > c.l + 8 && inter.y - c.y <= c.l + 27) {\n          if (c.x - 80 <= inter.x && c.x + 42 >= inter.x) {\n            return true;\n          }\n        }\n      } else {\n        if (inter.y - c.y > c.l + 8 && inter.y - c.y <= c.l + 27) {\n          if (c.x - 40 <= inter.x && c.x + 42 >= inter.x) {\n            return true;\n          }\n        }\n      }\n    }\n  }\n\n  // 车辆在路口转弯\n  gen_dir(inter) {\n    let c = this;\n    // 车辆已删除\n    if (c.dd) return;\n\n    var rand_dir = Math.random() * 10;\n    var dir = c.d;\n    c.dd = true;\n    var rand_no1 = 0,\n      rand_no2 = 0;\n    if (c.d == 'e') {\n      if (inter.width < 80) {\n        rand_no1 = 2;\n        rand_no2 = 5;\n      } else {\n        rand_no1 = 3;\n        rand_no2 = 6;\n      }\n      if (rand_dir < rand_no1) {\n        if (inter.roadbottom == true) {\n          var dir = 's';\n          c.d = 's';\n          c.x = inter.x + 10;\n          c.y = inter.y + inter.height - 27;\n        } else {\n          if (inter.roadright == true) {\n            var dir = c.d;\n          } else {\n            //turn\n          }\n        }\n      } else if (rand_dir > 3 && rand_dir < rand_no2) {\n        if (inter.roadtop == true) {\n          var dir = 'n';\n          c.d = 'n';\n          c.x = inter.x + inter.width - 9;\n          c.y = inter.y + c.l + 2;\n        } else {\n          if (inter.roadright == true) {\n            var dir = c.d;\n          } else {\n            //turn\n          }\n        }\n      } else {\n        if (inter.roadright == true) {\n          var dir = c.d;\n        } else {\n          //turn\n          var dir = 's';\n          c.d = 's';\n          c.x = inter.x + 10;\n          c.y = inter.y + 2;\n        }\n      }\n    } else if (c.d == 'w') {\n      if (inter.width < 80) {\n        rand_no1 = 2;\n        rand_no2 = 5;\n      } else {\n        rand_no1 = 3;\n        rand_no2 = 6;\n      }\n      if (rand_dir < rand_no1) {\n        if (inter.roadbottom == true) {\n          var dir = 's';\n          c.d = 's';\n          c.x = inter.x + 20;\n          c.y = inter.y + inter.height + c.l + 2;\n        } else {\n          if (inter.roadleft == true) {\n            var dir = c.d;\n          } else {\n            //turn\n          }\n        }\n      } else if (rand_dir > 3 && rand_dir < rand_no2) {\n        if (inter.roadtop == true) {\n          var dir = 'n';\n          c.d = 'n';\n          c.x = inter.x + inter.width + 1;\n          c.y = inter.y + c.l - 30;\n        } else {\n          if (inter.roadleft == true) {\n            var dir = c.d;\n          } else {\n            //turn\n          }\n        }\n      } else {\n        if (inter.roadleft == true) {\n          var dir = c.d;\n        } else {\n          //turn\n          var dir = 'n';\n          c.d = 'n';\n          c.x = inter.x + inter.width + 1;\n          c.y = inter.y + c.l + 2;\n        }\n      }\n    } else if (c.d == 'n') {\n      if (rand_dir < 3) {\n        if (inter.roadright == true) {\n          var dir = 'e';\n          c.d = 'e';\n          c.y = inter.y + inter.height - 10;\n          c.x = inter.x + inter.width + 1;\n        } else {\n        }\n      } else if (rand_dir > 3 && rand_dir < 6) {\n        if (inter.roadleft == true) {\n          var dir = 'w';\n          c.d = 'w';\n          c.y = inter.y + 8;\n          c.x = inter.x + 5;\n        } else {\n        }\n      } else {\n        if (inter.roadtop == true) {\n          var dir = c.d;\n        } else {\n          //turn\n          var dir = 'w';\n          c.d = 'w';\n          c.y = inter.y + 8;\n          c.x = inter.x + 5;\n        }\n      }\n    } else if (c.d == 's') {\n      if (rand_dir < 3) {\n        if (inter.roadright == true) {\n          var dir = 'e';\n          c.d = 'e';\n          c.y = inter.y + inter.height - 21;\n          c.x = inter.x + inter.width + 1;\n        } else {\n          if (inter.roadbottom == true) {\n            var dir = c.d;\n          } else {\n            //turn\n            c.s = 0;\n          }\n        }\n      } else if (rand_dir > 3 && rand_dir < 6) {\n        if (inter.roadleft == true) {\n          var dir = 'w';\n          c.d = 'w';\n          c.y = inter.y - 2;\n          c.x = inter.x - 28;\n        } else {\n          if (inter.roadbottom == true) {\n            var dir = c.d;\n          } else {\n            //turn\n            c.s = 0;\n          }\n        }\n      } else {\n        if (inter.roadleft == true) {\n          var dir = 'w';\n          c.d = 'w';\n          c.y = inter.y - 2;\n          c.x = inter.x - 28;\n        } else {\n          //turn\n          c.s = 0;\n        }\n      }\n    }\n  }\n\n  draw(ctx) {\n    ctx.fillStyle = this.color;\n    if (this.d == 'w') {\n      this.w = 25;\n      // 车身\n      ctx.rounded_rect(this.x, this.y, this.l, 12);\n      // 车窗\n      ctx.fillStyle = '#99B3CE';\n      ctx.fillRect(this.x + 5, this.y, 5, 12);\n      ctx.fillRect(this.x + 18, this.y, 2, 12);\n      // 后视镜\n      ctx.fillStyle = this.color;\n      ctx.fillRect(this.x + 6, this.y - 2, 2, 2);\n      ctx.fillRect(this.x + 6, this.y + 12, 2, 2);\n    } else if (this.d == 'e') {\n      this.w = 25;\n      ctx.rounded_rect(this.x, this.y, this.l, 12);\n      ctx.fillStyle = '#99B3CE';\n      ctx.fillRect(this.x + 15, this.y, 5, 12);\n      ctx.fillRect(this.x + 4, this.y, 2, 12);\n      ctx.fillStyle = this.color;\n      ctx.fillRect(this.x + 14, this.y - 2, 2, 2);\n      ctx.fillRect(this.x + 14, this.y + 12, 2, 2);\n    } else if (this.d == 's') {\n      this.w = 12;\n      ctx.rotate(Math.PI / 2);\n      ctx.rounded_rect(this.y, -this.x, this.l, 12);\n      ctx.fillStyle = '#99B3CE';\n      ctx.fillRect(this.y + 15, -this.x, 5, 12);\n      ctx.fillRect(this.y + 4, -this.x, 2, 12);\n      ctx.fillStyle = this.color;\n      ctx.fillRect(this.y + 14, -this.x - 2, 2, 2);\n      ctx.fillRect(this.y + 14, -this.x + 12, 2, 2);\n      ctx.rotate(-Math.PI / 2);\n    } else {\n      this.w = 12;\n      ctx.rotate(Math.PI / 2);\n      ctx.rounded_rect(this.y, -this.x, this.l, 12);\n      ctx.fillStyle = '#99B3CE';\n      ctx.fillRect(this.y + 5, -this.x, 5, 12);\n      ctx.fillRect(this.y + 18, -this.x, 2, 12);\n      ctx.fillStyle = this.color;\n      ctx.fillRect(this.y + 6, -this.x - 2, 2, 2);\n      ctx.fillRect(this.y + 6, -this.x + 12, 2, 2);\n      ctx.rotate(-Math.PI / 2);\n    }\n  }\n}\n\nexport default Car;\n","import color from '../color';\n\nconst Intersections = roads => {\n  const roadNum = roads.length,\n    intersections_arr = [];\n  for (let i = 0; i < roadNum - 1; i++) {\n    for (var j = i + 1; j < roadNum; j++) {\n      let r1 = roads[i],\n        r2 = roads[j];\n\n      // road 方向相同\n      if (r1.direction === r2.direction) continue;\n\n      // 交换road顺序，横向r1，纵向r2\n      if (r1.direction === 'v' && r2.direction === 'h') {\n        [r1, r2] = [r2, r1];\n      }\n\n      // r1,r2未交叉\n      if (r1.x + r1.width < r2.x || r1.x > r2.x) {\n        continue;\n      }\n      if (r2.y + r2.height < r1.y || r2.y > r1.y) {\n        continue;\n      }\n\n      // r1，r2存在尽头相交\n      let roadtop = true;\n      let roadbottom = true;\n      let roadleft = true;\n      let roadright = true;\n\n      if (r1.y == r2.y) {\n        roadtop = false;\n      }\n      if (r1.x == r2.x) {\n        roadleft = false;\n      }\n      if (r1.x + r1.width == r2.x + r2.width) {\n        roadright = false;\n      }\n      if (r1.y + r1.height == r2.y + r2.height) {\n        roadbottom = false;\n      }\n\n      intersections_arr.push(\n        new Intersection({\n          x: r2.x,\n          y: r1.y,\n          lightNumH: r1.num,\n          lightNumV: r2.num,\n          width: r2.width,\n          height: r1.height,\n          roadtop,\n          roadleft,\n          roadright,\n          roadbottom\n        })\n      );\n    }\n  }\n  return intersections_arr;\n};\n\nexport const defaultInter = {\n  x: 0,\n  y: 0,\n  lightNumH: 0,\n  lightNumV: 0,\n  width: 0,\n  height: 0,\n  roadtop: false,\n  roadleft: false,\n  roadright: false,\n  roadbottom: false\n};\n\n// 信号灯、斑马线\nclass Intersection {\n  constructor(options) {\n    for (let key in defaultInter) {\n      this[key] = options[key] || defaultInter[key];\n    }\n\n    this.setTraffic();\n  }\n\n  setTraffic(left_green = true) {\n    if (left_green) {\n      this.right = color.traffic.green;\n      this.left = color.traffic.green;\n      this.top = color.traffic.red;\n      this.bottom = color.traffic.red;\n    } else {\n      this.right = color.traffic.red;\n      this.left = color.traffic.red;\n      this.top = color.traffic.green;\n      this.bottom = color.traffic.green;\n    }\n  }\n\n  // 重绘路口\n  drawRoad(ctx, x, y, w, h) {\n    ctx.fillStyle = color.road;\n    ctx.fillRect(x, y, w, h);\n  }\n\n  // 斑马线\n  drawZebraCross(ctx, x1, y1, x2, y2) {\n    ctx.beginPath();\n    ctx.setLineDash([1, 5]);\n    ctx.moveTo(x1, y1);\n    ctx.lineTo(x2, y2);\n    ctx.closePath();\n    ctx.strokeStyle = '#A09383';\n    ctx.lineWidth = 10;\n    ctx.fill();\n    ctx.stroke();\n  }\n\n  // 停止线(缺多车道区分)\n  drawStopLine(ctx, x, y, w, h) {\n    ctx.fillStyle = '#A09383';\n    ctx.fillRect(x, y, w, h);\n  }\n\n  // 信号灯\n  drawTrafficLight(light, ctx, x, y, w, h) {\n    let shadow_color = light.color;\n    ctx.save();\n\n    let diff = Math.max(w, h) / light.num / 2;\n    for (let i = 0; i < light.num; i++) {\n      ctx.fillStyle = shadow_color;\n      ctx.shadowColor = shadow_color;\n      if (light.dir === 'left') {\n        ctx.fillRect(x - 3, y + diff * (2 * i + 1), 4, 4);\n      }\n      if (light.dir === 'right') {\n        ctx.fillRect(x + 1, y + h - diff * (2 * i + 1), 4, 4);\n      }\n      if (light.dir === 'top') {\n        ctx.fillRect(x + diff * (2 * i + 1), y - 3, 4, 4);\n      }\n      if (light.dir === 'bottom') {\n        ctx.fillRect(x + w - diff * (2 * i + 1), y + 1, 4, 4);\n      }\n      ctx.fill();\n      ctx.restore();\n    }\n\n    // 信号灯杆\n    ctx.fillStyle = '#ddd';\n    ctx.fillRect(x, y, w, h);\n  }\n\n  draw(ctx) {\n    // 覆盖路口\n    ctx.fillStyle = color.road;\n    ctx.fillRect(this.x, this.y, this.width, this.height);\n\n    if (this.roadleft == true) {\n      this.drawRoad(ctx, this.x - 20, this.y, 20, this.height);\n      this.drawZebraCross(\n        ctx,\n        this.x - 12,\n        this.y,\n        this.x - 12,\n        this.y + this.height\n      );\n      this.drawStopLine(\n        ctx,\n        this.x - 22,\n        this.height / 2 + this.y - 1,\n        2,\n        this.height / 2 + 1\n      );\n      this.drawTrafficLight(\n        { dir: 'left', num: this.lightNumH, color: this.left },\n        ctx,\n        this.x - 3,\n        this.y + this.height - this.height / 2 + 3,\n        1,\n        this.height / 2\n      );\n    }\n    if (this.roadright == true) {\n      this.drawRoad(ctx, this.x + this.width, this.y, 22, this.height);\n      this.drawZebraCross(\n        ctx,\n        this.x + this.width + 12,\n        this.y,\n        this.x + this.width + 12,\n        this.y + this.height\n      );\n      this.drawStopLine(\n        ctx,\n        this.x + this.width + 22,\n        this.y,\n        2,\n        this.height / 2 + 1\n      );\n      this.drawTrafficLight(\n        { dir: 'right', num: this.lightNumH, color: this.right },\n        ctx,\n        this.x + this.width + 2,\n        this.y - 3,\n        1,\n        this.height / 2\n      );\n    }\n    if (this.roadtop == true) {\n      this.drawRoad(ctx, this.x, this.y - 20, this.width, 20);\n      this.drawZebraCross(\n        ctx,\n        this.x,\n        this.y - 12,\n        this.x + this.width,\n        this.y - 12\n      );\n      this.drawStopLine(ctx, this.x, this.y - 21, this.width / 2 + 1, 2);\n      this.drawTrafficLight(\n        { dir: 'top', num: this.lightNumV, color: this.top },\n        ctx,\n        this.x - 3,\n        this.y - 2,\n        this.width / 2,\n        1\n      );\n    }\n    if (this.roadbottom == true) {\n      this.drawRoad(ctx, this.x, this.y + this.height, this.width, 20);\n      this.drawZebraCross(\n        ctx,\n        this.x,\n        this.y + this.height + 12,\n        this.x + this.width,\n        this.y + this.height + 12\n      );\n      this.drawStopLine(\n        ctx,\n        this.x + this.width - this.width / 2 - 1,\n        this.y + this.height + 20,\n        this.width / 2 + 1,\n        2\n      );\n      this.drawTrafficLight(\n        { dir: 'bottom', num: this.lightNumV, color: this.bottom },\n        ctx,\n        this.x + this.width / 2 + 3,\n        this.y + this.height + 2,\n        this.width / 2,\n        1\n      );\n    }\n  }\n}\n\nexport default Intersections;\n","import { isBrowserOk } from './util';\nimport Road from './component/Road';\nimport Car, { addRoundedRect, defaultCar } from './component/Car';\nimport Intersections from './component/Intersections';\nimport color from './color';\nconst canvas = document.getElementsByTagName('canvas')[0];\nconst ctx = canvas.getContext('2d');\n\naddRoundedRect(ctx);\n\n// 检测canvas支持虚线 dash\nif (!ctx.setLineDash) {\n  ctx.setLineDash = function() {\n    console.log('browser not supported for dashed lines');\n  };\n}\n\n// 设置canvas宽高\nlet w = document.documentElement.clientWidth,\n  h = document.documentElement.clientHeight;\n// canvas.style.transformOrigin = '0 0';\n// canvas.style.transform = 'scale(0.5,0.5)';\ncanvas.width = w;\ncanvas.height = h;\n\nlet roads = [],\n  intersections_arr = [],\n  cars = [];\n\nconst roadConfig = [\n  {\n    x: 0,\n    y: h / 2 - 20,\n    width: w,\n    height: 40,\n    direction: 'h',\n    num: 1\n  },\n  {\n    x: w / 2 - 20,\n    y: 0,\n    width: 40,\n    height: h,\n    direction: 'v',\n    num: 1\n  }\n  // {\n  //   x: 0,\n  //   y: 200,\n  //   width: w,\n  //   height: 40,\n  //   direction: 'h'\n  // },\n  // {\n  //   x: 1050,\n  //   y: h / 2 - 40,\n  //   width: 40,\n  //   height: h - (h / 2 - 40),\n  //   direction: 'v'\n  // },\n  // {\n  //   x: 450,\n  //   y: 200,\n  //   width: 40,\n  //   height: h - 200,\n  //   direction: 'v'\n  // },\n  // {\n  //   x: 120,\n  //   y: 0,\n  //   width: 80,\n  //   height: h,\n  //   direction: 'v'\n  // },\n  // {\n  //   x: 0,\n  //   y: h / 2 + 240,\n  //   width: w,\n  //   height: 40,\n  //   direction: 'h'\n  // }\n];\n\n// 定时变换信号灯\nlet left_green = false;\n\nfunction left_greenc() {\n  left_green = !left_green;\n}\n\nsetInterval(() => {\n  left_greenc();\n}, 3000);\n\n// 初始化\nfunction init() {\n  //Launch Cars\n  cars = [];\n  roads = [];\n  intersections_arr = [];\n\n  const roadTotal = roadConfig.length;\n\n  // 生成car\n  const car_no = 2;\n  for (let i = 0; i < car_no; i++) {\n    let car = new Car();\n    let randomRoad = roadConfig[~~Math.random() * roadTotal];\n    const { direction, x, y, width, height } = randomRoad;\n\n    if (direction === 'h') {\n      car.x = x + width + defaultCar.l;\n      car.y = y + height / 2 - 17;\n      car.d = 'w';\n    } else {\n      car.x = x + width / 2 + 17;\n      car.y = y + height + defaultCar.l;\n      car.d = 'n';\n    }\n\n    let color_rand = Math.random();\n    let color = '';\n    if (color_rand < 0.2) {\n      color = '#fff';\n    } else if (color_rand > 0.2 && color_rand < 0.4) {\n      color = '#E22322';\n    } else if (color_rand > 0.4 && color_rand < 0.6) {\n      color = '#F9D111';\n    } else if (color_rand > 0.6 && color_rand < 0.8) {\n      color = '#367C94';\n    } else if (color_rand > 0.8 && color_rand < 1) {\n      color = '#222';\n    }\n    car.color = color;\n    cars.push(car);\n  }\n\n  // 生成road\n  roads = roadConfig.map(config => new Road(config));\n\n  // 生成路口\n  intersections_arr = Intersections(roadConfig);\n}\n\n// 绘制场景\nfunction drawscene() {\n  // 清除画布\n  ctx.clearRect(0, 0, w, h);\n\n  // 底图\n  ctx.fillStyle = '#4DBB4C';\n  ctx.fillRect(0, 0, w, h);\n\n  // 道路\n  roads.forEach(road => {\n    road.draw(ctx);\n  });\n\n  // 路口\n  intersections_arr.forEach(intersection => {\n    intersection.setTraffic(left_green);\n    intersection.draw(ctx);\n  });\n\n  // 车辆\n  drive_cars();\n}\n\n// 移动车辆\nfunction drive_cars() {\n  const carCount = cars.length;\n  for (var i = 0; i < carCount; i++) {\n    var c = cars[i];\n    c.s = 5;\n    if (c.d == 'e') {\n      for (var l = 0; l < carCount; l++) {\n        var c2 = cars[l];\n        var dc = c.check_distance(c2, 'x');\n        if (dc == true) {\n          // 车辆停止\n          c.s = 0;\n          for (var k = 0; k < intersections_arr.length; k++) {\n            var inter = intersections_arr[k];\n\n            if (inter.y + inter.height > c.y && inter.y < c.y) {\n              // 两车道，车辆放置到较少车辆车道\n              if (inter.height === 80) {\n                var lc = 0;\n                var ld = 0;\n                for (var v = 0; v < carCount; v++) {\n                  if (\n                    cars[v].y == inter.y + 44 &&\n                    cars[v].x < inter.x &&\n                    cars[v].s == 0\n                  ) {\n                    lc++;\n                  }\n                  if (\n                    cars[v].y == c.y &&\n                    cars[v].x < inter.x &&\n                    cars[v].s == 0\n                  ) {\n                    ld++;\n                  }\n                }\n                if (ld - 2 > lc) {\n                  c.y = inter.y + 44;\n                }\n              }\n            }\n          }\n        } else {\n          // 车辆继续前进\n          var counter = 0;\n          for (var k = 0; k < intersections_arr.length; k++) {\n            var inter = intersections_arr[k];\n            if (c.check_inter(inter, 'x')) {\n              counter++;\n              if (inter.left == color.traffic.red) {\n                //red\n                c.s = 0;\n              } else {\n                //green\n                c.s = defaultCar.s;\n                //改变方向\n                c.gen_dir(inter);\n              }\n            }\n          }\n          if (counter == 0) {\n            //car past intersection reset random generator\n            c.dd = false;\n          }\n        }\n      }\n      // 车辆已驶出屏幕，重置位置\n      if (c.x + 26 >= canvas.width) {\n        //reposition car\n        c.x = -1 * defaultCar.l;\n      }\n      c.x += c.s;\n    } else if (c.d == 'n') {\n      for (var l = 0; l < cars.length; l++) {\n        var c2 = cars[l];\n        var dc = c.check_distance(c2, '-y');\n        if (dc == true) {\n          c.s = 0;\n          for (var k = 0; k < intersections_arr.length; k++) {\n            var inter = intersections_arr[k];\n            if (inter.x + inter.width > c.x && inter.x < c.x) {\n              //this is road\n              if (inter.width == 80) {\n                var lc = 0;\n                var ld = 0;\n                for (var v = 0; v < cars.length; v++) {\n                  if (\n                    cars[v].x == inter.x + 55 &&\n                    cars[v].y < inter.y &&\n                    cars[v].s == 0\n                  ) {\n                    lc++;\n                  }\n                  if (\n                    cars[v].x == c.x &&\n                    cars[v].y < inter.y &&\n                    cars[v].s == 0\n                  ) {\n                    ld++;\n                  }\n                }\n                if (ld - 2 > lc) {\n                  c.x = inter.x + 55;\n                }\n              }\n            }\n          }\n        } else {\n          var counter = 0;\n          for (var k = 0; k < intersections_arr.length; k++) {\n            var inter = intersections_arr[k];\n            if (c.check_inter(inter, '-y')) {\n              counter++;\n              if (inter.bottom == color.traffic.red) {\n                //red\n                c.s = 0;\n              } else {\n                //green\n                c.s = defaultCar.s;\n                //figure dir\n                c.gen_dir(inter);\n              }\n            }\n          }\n          if (counter == 0) {\n            //car past intersection reset random generator\n            c.dd = false;\n          }\n        }\n      }\n      if (c.y + 26 <= 0) {\n        //reposition car\n        c.y = h + defaultCar.l;\n      }\n      c.y -= c.s;\n    } else if (c.d == 's') {\n      for (var l = 0; l < cars.length; l++) {\n        var c2 = cars[l];\n        var dc = c.check_distance(c2, 'y');\n        if (dc == true) {\n          c.s = 0;\n          for (var k = 0; k < intersections_arr.length; k++) {\n            var inter = intersections_arr[k];\n            if (inter.x + inter.width > c.x && inter.x < c.x) {\n              //this is road\n              if (inter.width == 80) {\n                var lc = 0;\n                var ld = 0;\n                for (var v = 0; v < cars.length; v++) {\n                  if (\n                    cars[v].x == inter.x + 36 &&\n                    cars[v].y < inter.y &&\n                    cars[v].s == 0\n                  ) {\n                    lc++;\n                  }\n                  if (\n                    cars[v].x == c.x &&\n                    cars[v].y < inter.y &&\n                    cars[v].s == 0\n                  ) {\n                    ld++;\n                  }\n                }\n                if (ld - 1 > lc) {\n                  c.x = inter.x + 36;\n                }\n              }\n            }\n          }\n        } else {\n          var counter = 0;\n          for (var k = 0; k < intersections_arr.length; k++) {\n            var inter = intersections_arr[k];\n            if (c.check_inter(inter, 'y')) {\n              counter++;\n              if (inter.top == color.traffic.red) {\n                //red\n                c.s = 0;\n              } else {\n                //green\n                c.s = defaultCar.s;\n                //figure dir\n                c.gen_dir(inter);\n              }\n            }\n          }\n          if (counter == 0) {\n            //car past intersection reset random generator\n            c.dd = false;\n          }\n        }\n      }\n      if (c.y - 26 >= h) {\n        //reposition car\n        c.y = -1 * defaultCar.l;\n      }\n      c.y += c.s;\n    } else if (c.d == 'w') {\n      for (var l = 0; l < cars.length; l++) {\n        var c2 = cars[l];\n        var dc = c.check_distance(c2, '-x');\n        if (dc == true) {\n          c.s = 0;\n          for (var k = 0; k < intersections_arr.length; k++) {\n            var inter = intersections_arr[k];\n            if (inter.y + inter.height > c.y && inter.y < c.y) {\n              //this is road\n              if (inter.height == 80) {\n                var lc = 0;\n                var ld = 0;\n                for (var v = 0; v < cars.length; v++) {\n                  if (\n                    cars[v].y == inter.y + 22 &&\n                    cars[v].x > inter.x &&\n                    cars[v].s == 0\n                  ) {\n                    lc++;\n                  }\n                  if (\n                    cars[v].y == c.y &&\n                    cars[v].x > inter.x &&\n                    cars[v].s == 0\n                  ) {\n                    ld++;\n                  }\n                }\n                if (ld - 2 > lc) {\n                  c.y = inter.y + 22;\n                }\n              }\n            }\n          }\n        } else {\n          var counter = 0;\n          for (var k = 0; k < intersections_arr.length; k++) {\n            var inter = intersections_arr[k];\n            if (c.check_inter(inter, '-x')) {\n              counter++;\n              if (inter.right == color.traffic.red) {\n                //red\n                c.s = 0;\n              } else {\n                //green\n                c.s = defaultCar.s;\n                //figure dir\n                c.gen_dir(inter);\n              }\n            }\n          }\n          if (counter == 0) {\n            //car past intersection reset random generator\n            c.dd = false;\n          }\n        }\n      }\n      // 车辆离开视图\n      if (c.x + 26 <= 0) {\n        //reposition car\n        c.x = w + defaultCar.l;\n      }\n      c.x -= c.s;\n    }\n    c.draw(ctx);\n  }\n}\n\n// 控制车辆开始运动\nlet isPlay = false,\n  btnEl = document.getElementById('play');\n\nbtnEl.onclick = () => {\n  isPlay = !isPlay;\n  btnEl.innerHTML = isPlay ? 'pause' : 'play';\n  isPlay && animloop();\n};\n\n// rAF方案保证渲染能力\nfunction animloop() {\n  drawscene();\n  if (isPlay) {\n    requestAnimFrame(animloop);\n  }\n}\n\ninit();\n// drawscene();\nanimloop();\n"]}