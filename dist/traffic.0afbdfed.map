{"version":3,"sources":["util.js","traffic.js"],"names":["window","requestAnimFrame","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","setTimeout","BrowserDetect","init","browser","searchString","dataBrowser","version","searchVersion","navigator","userAgent","appVersion","OS","dataOS","data","i","length","dataString","string","dataProp","prop","versionSearchString","versionSearch","identity","indexOf","subString","index","parseFloat","substring","vendor","opera","platform","isBrowserOk","notify","confirm","notify2","car_no","canvas","document","getElementsByTagName","ctx","getContext","cars","roads","intersections_arr","getElementById","value","getElementsByClassName","innerHTML","car","drawcar","s","pos_rand","Math","random","x","w","y","d","h","color_rand","color","console","log","push","road","drawroad","width","height","intersections","drawscene","fillStyle","fillRect","draw","left_greenc","left_green","distance_check","c1","c2","axis","dist","disty","l","check_inter","c","inter","gen_dir","dd","rand_dir","dir","rand_no1","rand_no2","roadbottom","roadright","roadtop","roadleft","drive_cars","dc","k","lc","ld","v","counter","left","bottom","top","right","rounded_rect","rotate","PI","drawinter","beginPath","setLineDash","moveTo","lineTo","closePath","strokeStyle","lineWidth","fill","stroke","save","shadow_color","shadowColor","shadowOffsetX","shadowBlur","restore","undefined","shadowOffsetY","r1","j","r2","animloop","setInterval","Object","getPrototypeOf","r","quadraticCurveTo"],"mappings":"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","file":"traffic.0afbdfed.map","sourceRoot":"..","sourcesContent":["// 兼容rAF\nwindow.requestAnimFrame = (function() {\n  return (\n    window.requestAnimationFrame ||\n    window.webkitRequestAnimationFrame ||\n    window.mozRequestAnimationFrame ||\n    window.oRequestAnimationFrame ||\n    window.msRequestAnimationFrame ||\n    function(callback) {\n      window.setTimeout(callback, 1000 / 60);\n    }\n  );\n})();\n\n// 设备检测\nconst BrowserDetect = {\n  init: function() {\n    this.browser = this.searchString(this.dataBrowser) || 'An unknown browser';\n    this.version =\n      this.searchVersion(navigator.userAgent) ||\n      this.searchVersion(navigator.appVersion) ||\n      'an unknown version';\n    this.OS = this.searchString(this.dataOS) || 'an unknown OS';\n  },\n  searchString: function(data) {\n    for (let i = 0; i < data.length; i++) {\n      let dataString = data[i].string;\n      let dataProp = data[i].prop;\n      this.versionSearchString = data[i].versionSearch || data[i].identity;\n      if (dataString) {\n        if (dataString.indexOf(data[i].subString) != -1)\n          return data[i].identity;\n      } else if (dataProp) return data[i].identity;\n    }\n  },\n  searchVersion: function(dataString) {\n    let index = dataString.indexOf(this.versionSearchString);\n    if (index == -1) return;\n    return parseFloat(\n      dataString.substring(index + this.versionSearchString.length + 1)\n    );\n  },\n  dataBrowser: [\n    {\n      string: navigator.userAgent,\n      subString: 'Chrome',\n      identity: 'Chrome'\n    },\n    {\n      string: navigator.userAgent,\n      subString: 'OmniWeb',\n      versionSearch: 'OmniWeb/',\n      identity: 'OmniWeb'\n    },\n    {\n      string: navigator.vendor,\n      subString: 'Apple',\n      identity: 'Safari',\n      versionSearch: 'Version'\n    },\n    {\n      prop: window.opera,\n      identity: 'Opera',\n      versionSearch: 'Version'\n    },\n    {\n      string: navigator.vendor,\n      subString: 'iCab',\n      identity: 'iCab'\n    },\n    {\n      string: navigator.vendor,\n      subString: 'KDE',\n      identity: 'Konqueror'\n    },\n    {\n      string: navigator.userAgent,\n      subString: 'Firefox',\n      identity: 'Firefox'\n    },\n    {\n      string: navigator.vendor,\n      subString: 'Camino',\n      identity: 'Camino'\n    },\n    {\n      // for newer Netscapes (6+)\n      string: navigator.userAgent,\n      subString: 'Netscape',\n      identity: 'Netscape'\n    },\n    {\n      string: navigator.userAgent,\n      subString: 'MSIE',\n      identity: 'Explorer',\n      versionSearch: 'MSIE'\n    },\n    {\n      string: navigator.userAgent,\n      subString: 'Gecko',\n      identity: 'Mozilla',\n      versionSearch: 'rv'\n    },\n    {\n      // for older Netscapes (4-)\n      string: navigator.userAgent,\n      subString: 'Mozilla',\n      identity: 'Netscape',\n      versionSearch: 'Mozilla'\n    }\n  ],\n  dataOS: [\n    {\n      string: navigator.platform,\n      subString: 'Win',\n      identity: 'Windows'\n    },\n    {\n      string: navigator.platform,\n      subString: 'Mac',\n      identity: 'Mac'\n    },\n    {\n      string: navigator.userAgent,\n      subString: 'iPhone',\n      identity: 'iPhone/iPod'\n    },\n    {\n      string: navigator.platform,\n      subString: 'Linux',\n      identity: 'Linux'\n    }\n  ]\n};\n\nBrowserDetect.init();\n\nlet isBrowserOk = false;\nif (BrowserDetect.browser == 'Firefox') {\n  let notify = confirm(\n    'Firefox seems to have an issue rendering this and can cause your machine to crash, so please use google chrome or safari'\n  );\n  if (notify == true) {\n    let notify2 = confirm('You sure you want to run this?');\n    if (notify2 == true) {\n      isBrowserOk = true;\n    }\n  }\n} else {\n  isBrowserOk = true;\n}\n\nexport { BrowserDetect, isBrowserOk };\n","import { isBrowserOk } from './util';\n\nvar car_no = 36;\nvar canvas = document.getElementsByTagName('canvas')[0];\nvar ctx = canvas.getContext('2d');\n\n// 检查ok，执行\nif (isBrowserOk == true) {\n  if (!ctx.setLineDash) {\n    ctx.setLineDash = function() {\n      console.log('browser not supported for dashed lines');\n    };\n  }\n\n  var w = 1500,\n    h = 830;\n  canvas.width = w;\n  canvas.height = h;\n  var roads = [],\n    intersections_arr = [],\n    cars = [];\n\n  function init() {\n    //Launch Cars\n    cars = [];\n    roads = [];\n    intersections_arr = [];\n    var car_no = document.getElementById('input').value;\n    document.getElementsByClassName('car_no')[0].innerHTML = car_no;\n    for (var i = 0; i < car_no; i++) {\n      var car = new drawcar();\n      car.s = 5;\n      var pos_rand = Math.random();\n      if (pos_rand < 0.5) {\n        car.x = w + 25;\n        car.y = 378;\n        car.d = 'w';\n      } else {\n        car.x = 786;\n        car.y = h + 25;\n        car.d = 'n';\n      }\n      var color_rand = Math.random();\n      var color = '';\n      if (color_rand < 0.2) {\n        var color = '#fff';\n      } else if (color_rand > 0.2 && color_rand < 0.4) {\n        var color = '#E22322';\n      } else if (color_rand > 0.4 && color_rand < 0.6) {\n        var color = '#F9D111';\n      } else if (color_rand > 0.6 && color_rand < 0.8) {\n        var color = '#367C94';\n      } else if (color_rand > 0.8 && color_rand < 1) {\n        var color = '#222';\n      }\n      console.log(color);\n      car.color = color;\n      cars.push(car);\n    }\n\n    //road1\n    var road = new drawroad();\n    (road.x = 0), (road.y = h / 2 - 40), (road.width = w), (road.height = 80);\n    roads.push(road);\n\n    //road2\n    var road = new drawroad();\n    (road.x = w / 2 - 40), (road.y = 0), (road.width = 80), (road.height = h);\n    roads.push(road);\n\n    //road3\n    var road = new drawroad();\n    (road.x = 0), (road.y = 200), (road.width = w), (road.height = 40);\n    roads.push(road);\n\n    //road4\n    var road = new drawroad();\n    (road.x = 1050),\n      (road.y = h / 2 - 40),\n      (road.width = 40),\n      (road.height = h - (h / 2 - 40));\n    roads.push(road);\n\n    //road5\n    var road = new drawroad();\n    (road.x = 450), (road.y = 200), (road.width = 40), (road.height = h - 200);\n    roads.push(road);\n\n    //road6\n    var road = new drawroad();\n    (road.x = 120), (road.y = 0), (road.width = 80), (road.height = h);\n    roads.push(road);\n\n    //road7\n    var road = new drawroad();\n    (road.x = 0), (road.y = h / 2 + 240), (road.width = w), (road.height = 40);\n    roads.push(road);\n\n    intersections();\n  }\n\n  function drawscene() {\n    intersections_arr = [];\n    //console.log(\"drawingscene\");\n\n    ctx.fillStyle = '#4DBB4C';\n    ctx.fillRect(0, 0, w, h);\n\n    for (var i = 0; i < roads.length; i++) {\n      roads[i].draw();\n    }\n    intersections();\n    // drive_cars();\n  }\n  var left_green = false;\n\n  function left_greenc() {\n    left_green = !left_green;\n  }\n\n  setInterval(() => {\n    left_greenc();\n  }, 3000);\n\n  // 俩车距离确认\n  function distance_check(c1, c2, axis) {\n    if (axis == 'x') {\n      var dist,\n        dist = c2.x - c1.x;\n      disty = c2.y - c1.y;\n      if (dist > 0 && dist <= c1.l + 15) {\n        if (c2.w > 15 && c1.w > 15 && c1.y == c2.y) {\n          //only check for collison on cars on the same axis\n          return true;\n        }\n      }\n    } else if (axis == '-x') {\n      var dist,\n        dist = c1.x - c2.x;\n      disty = c1.y - c2.y;\n      if (dist > 0 && dist <= c1.l + 15) {\n        if (c2.w > 15 && c1.w > 15 && c1.y == c2.y) {\n          //only check for collison on cars on the same axis\n          return true;\n        }\n      }\n    } else if (axis == '-y') {\n      var dist,\n        dist = c1.x - c2.x,\n        disty = c1.y - c2.y;\n      if (disty > 0 && disty <= c1.l + 15) {\n        if (c2.w < 25 && c1.w < 25 && c1.x == c2.x) {\n          //only check for collison on cars on the same axis\n          return true;\n        }\n      }\n    } else if (axis == 'y') {\n      var dist,\n        dist = c2.x - c1.x;\n      disty = c2.y - c1.y;\n      if (disty > 0 && disty <= c1.l + 15) {\n        if (c2.w < 25 && c1.w < 25 && c1.x == c2.x) {\n          //only check for collison on cars on the same axis\n          return true;\n        }\n      }\n    }\n  }\n\n  function check_inter(c, inter, axis) {\n    if (axis == 'x') {\n      if (inter.height > 40) {\n        if (inter.x - c.x > c.l + 8 && inter.x - c.x <= c.l + 25) {\n          if (c.y - 80 <= inter.y && c.y + 42 >= inter.y) {\n            return true;\n          }\n        }\n      } else {\n        if (inter.x - c.x > c.l + 8 && inter.x - c.x <= c.l + 25) {\n          if (c.y - 40 <= inter.y && c.y + 42 >= inter.y) {\n            return true;\n          }\n        }\n      }\n    } else if (axis == '-x') {\n      if (inter.height > 40) {\n        if (c.x - inter.x > c.l + 8 && c.x - inter.x <= c.l + inter.width + 5) {\n          if (c.y - 80 <= inter.y && c.y + 42 >= inter.y) {\n            return true;\n          }\n        }\n      } else {\n        if (c.x - inter.x > c.l + 8 && c.x - inter.x <= c.l + inter.width + 5) {\n          if (c.y - 40 <= inter.y && c.y + 42 >= inter.y) {\n            return true;\n          }\n        }\n      }\n    } else if (axis == '-y') {\n      if (inter.width > 40) {\n        if (\n          c.y - inter.y > c.l + 8 &&\n          c.y - inter.y <= c.l + inter.height + 5\n        ) {\n          if (c.x - 80 <= inter.x && c.x + 42 >= inter.x) {\n            return true;\n          }\n        }\n      } else {\n        if (\n          c.y - inter.y > c.l + 8 &&\n          c.y - inter.y <= c.l + inter.height + 5\n        ) {\n          if (c.x - 40 <= inter.x && c.x + 42 >= inter.x) {\n            return true;\n          }\n        }\n      }\n    } else if (axis == 'y') {\n      if (inter.width > 40) {\n        if (inter.y - c.y > c.l + 8 && inter.y - c.y <= c.l + 27) {\n          if (c.x - 80 <= inter.x && c.x + 42 >= inter.x) {\n            return true;\n          }\n        }\n      } else {\n        if (inter.y - c.y > c.l + 8 && inter.y - c.y <= c.l + 27) {\n          if (c.x - 40 <= inter.x && c.x + 42 >= inter.x) {\n            return true;\n          }\n        }\n      }\n    }\n  }\n\n  function gen_dir(c, inter) {\n    if (c.dd == false) {\n      var rand_dir = Math.random() * 10;\n      var dir = c.d;\n      c.dd = true;\n      var rand_no1 = 0,\n        rand_no2 = 0;\n      if (c.d == 'e') {\n        if (inter.width < 80) {\n          rand_no1 = 2;\n          rand_no2 = 5;\n        } else {\n          rand_no1 = 3;\n          rand_no2 = 6;\n        }\n        if (rand_dir < rand_no1) {\n          if (inter.roadbottom == true) {\n            var dir = 's';\n            c.d = 's';\n            c.x = inter.x + 10;\n            c.y = inter.y + inter.height - 27;\n          } else {\n            if (inter.roadright == true) {\n              var dir = c.d;\n            } else {\n              //turn\n            }\n          }\n        } else if (rand_dir > 3 && rand_dir < rand_no2) {\n          if (inter.roadtop == true) {\n            var dir = 'n';\n            c.d = 'n';\n            c.x = inter.x + inter.width - 9;\n            c.y = inter.y + c.l + 2;\n          } else {\n            if (inter.roadright == true) {\n              var dir = c.d;\n            } else {\n              //turn\n            }\n          }\n        } else {\n          if (inter.roadright == true) {\n            var dir = c.d;\n          } else {\n            //turn\n            var dir = 's';\n            c.d = 's';\n            c.x = inter.x + 10;\n            c.y = inter.y + 2;\n          }\n        }\n      } else if (c.d == 'w') {\n        if (inter.width < 80) {\n          rand_no1 = 2;\n          rand_no2 = 5;\n        } else {\n          rand_no1 = 3;\n          rand_no2 = 6;\n        }\n        if (rand_dir < rand_no1) {\n          if (inter.roadbottom == true) {\n            var dir = 's';\n            c.d = 's';\n            c.x = inter.x + 20;\n            c.y = inter.y + inter.height + c.l + 2;\n          } else {\n            if (inter.roadleft == true) {\n              var dir = c.d;\n            } else {\n              //turn\n            }\n          }\n        } else if (rand_dir > 3 && rand_dir < rand_no2) {\n          if (inter.roadtop == true) {\n            var dir = 'n';\n            c.d = 'n';\n            c.x = inter.x + inter.width + 1;\n            c.y = inter.y + c.l - 30;\n          } else {\n            if (inter.roadleft == true) {\n              var dir = c.d;\n            } else {\n              //turn\n            }\n          }\n        } else {\n          if (inter.roadleft == true) {\n            var dir = c.d;\n          } else {\n            //turn\n            var dir = 'n';\n            c.d = 'n';\n            c.x = inter.x + inter.width + 1;\n            c.y = inter.y + c.l + 2;\n          }\n        }\n      } else if (c.d == 'n') {\n        if (rand_dir < 3) {\n          if (inter.roadright == true) {\n            var dir = 'e';\n            c.d = 'e';\n            c.y = inter.y + inter.height - 10;\n            c.x = inter.x + inter.width + 1;\n          } else {\n          }\n        } else if (rand_dir > 3 && rand_dir < 6) {\n          if (inter.roadleft == true) {\n            var dir = 'w';\n            c.d = 'w';\n            c.y = inter.y + 8;\n            c.x = inter.x + 5;\n          } else {\n          }\n        } else {\n          if (inter.roadtop == true) {\n            var dir = c.d;\n          } else {\n            //turn\n            var dir = 'w';\n            c.d = 'w';\n            c.y = inter.y + 8;\n            c.x = inter.x + 5;\n          }\n        }\n      } else if (c.d == 's') {\n        if (rand_dir < 3) {\n          if (inter.roadright == true) {\n            var dir = 'e';\n            c.d = 'e';\n            c.y = inter.y + inter.height - 21;\n            c.x = inter.x + inter.width + 1;\n          } else {\n            if (inter.roadbottom == true) {\n              var dir = c.d;\n            } else {\n              //turn\n              c.s = 0;\n            }\n          }\n        } else if (rand_dir > 3 && rand_dir < 6) {\n          if (inter.roadleft == true) {\n            var dir = 'w';\n            c.d = 'w';\n            c.y = inter.y - 2;\n            c.x = inter.x - 28;\n          } else {\n            if (inter.roadbottom == true) {\n              var dir = c.d;\n            } else {\n              //turn\n              c.s = 0;\n            }\n          }\n        } else {\n          if (inter.roadleft == true) {\n            var dir = 'w';\n            c.d = 'w';\n            c.y = inter.y - 2;\n            c.x = inter.x - 28;\n          } else {\n            //turn\n            c.s = 0;\n          }\n        }\n      }\n    }\n  }\n\n  function drive_cars() {\n    for (var i = 0; i < cars.length; i++) {\n      var c = cars[i];\n      c.s = 5;\n      if (c.d == 'e') {\n        for (var l = 0; l < cars.length; l++) {\n          var c2 = cars[l];\n          var dc = distance_check(c, c2, 'x');\n          if (dc == true) {\n            c.s = 0;\n            for (var k = 0; k < intersections_arr.length; k++) {\n              var inter = intersections_arr[k];\n              if (inter.y + inter.height > c.y && inter.y < c.y) {\n                //this is road\n                if (inter.height == 80) {\n                  var lc = 0;\n                  var ld = 0;\n                  for (var v = 0; v < cars.length; v++) {\n                    if (\n                      cars[v].y == inter.y + 44 &&\n                      cars[v].x < inter.x &&\n                      cars[v].s == 0\n                    ) {\n                      lc++;\n                    }\n                    if (\n                      cars[v].y == c.y &&\n                      cars[v].x < inter.x &&\n                      cars[v].s == 0\n                    ) {\n                      ld++;\n                    }\n                  }\n                  if (ld - 2 > lc) {\n                    c.y = inter.y + 44;\n                    c.s = 0;\n                  } else {\n                    c.s = 0;\n                  }\n                  var dc = distance_check(c, c2, 'x');\n                  if (dc == true) {\n                    c.s = 0;\n                  }\n                } else {\n                  c.s = 0;\n                }\n              }\n            }\n          } else {\n            var counter = 0;\n            for (var k = 0; k < intersections_arr.length; k++) {\n              var inter = intersections_arr[k];\n              if (check_inter(c, inter, 'x')) {\n                counter++;\n                if (inter.left == 'rgba(255,0,0,0.4)') {\n                  //red\n                  c.s = 0;\n                } else {\n                  //green\n                  c.s = 5;\n                  //figure dir\n                  gen_dir(c, inter);\n                }\n              }\n            }\n            if (counter == 0) {\n              //car past intersection reset random generator\n              c.dd = false;\n            }\n          }\n        }\n        if (c.x + 26 >= canvas.width) {\n          //reposition car\n          c.x = -25;\n          c.y = 444;\n          c.x = -25;\n          c.d = 'e';\n          c.y -= c.s;\n        }\n        c.x += c.s;\n      } else if (c.d == 'n') {\n        for (var l = 0; l < cars.length; l++) {\n          var c2 = cars[l];\n          var dc = distance_check(c, c2, '-y');\n          if (dc == true) {\n            c.s = 0;\n            for (var k = 0; k < intersections_arr.length; k++) {\n              var inter = intersections_arr[k];\n              if (inter.x + inter.width > c.x && inter.x < c.x) {\n                //this is road\n                if (inter.width == 80) {\n                  var lc = 0;\n                  var ld = 0;\n                  for (var v = 0; v < cars.length; v++) {\n                    if (\n                      cars[v].x == inter.x + 55 &&\n                      cars[v].y < inter.y &&\n                      cars[v].s == 0\n                    ) {\n                      lc++;\n                    }\n                    if (\n                      cars[v].x == c.x &&\n                      cars[v].y < inter.y &&\n                      cars[v].s == 0\n                    ) {\n                      ld++;\n                    }\n                  }\n                  if (ld - 2 > lc) {\n                    c.x = inter.x + 55;\n                    c.s = 0;\n                  } else {\n                    c.s = 0;\n                  }\n                  var dc = distance_check(c, c2, '-y');\n                  if (dc == true) {\n                    c.s = 0;\n                  }\n                } else {\n                  c.s = 0;\n                }\n              }\n            }\n          } else {\n            var counter = 0;\n            for (var k = 0; k < intersections_arr.length; k++) {\n              var inter = intersections_arr[k];\n              if (check_inter(c, inter, '-y')) {\n                counter++;\n                if (inter.bottom == 'rgba(255,0,0,0.4)') {\n                  //red\n                  c.s = 0;\n                } else {\n                  //green\n                  c.s = 5;\n                  //figure dir\n                  gen_dir(c, inter);\n                }\n              }\n            }\n            if (counter == 0) {\n              //car past intersection reset random generator\n              c.dd = false;\n            }\n          }\n        }\n        if (c.y + 26 <= 0) {\n          //reposition car\n          c.x = 786;\n          c.y = h + 25;\n          c.d = 'n';\n          c.y -= c.s;\n        }\n        c.y -= c.s;\n      } else if (c.d == 's') {\n        for (var l = 0; l < cars.length; l++) {\n          var c2 = cars[l];\n          var dc = distance_check(c, c2, 'y');\n          if (dc == true) {\n            c.s = 0;\n            for (var k = 0; k < intersections_arr.length; k++) {\n              var inter = intersections_arr[k];\n              if (inter.x + inter.width > c.x && inter.x < c.x) {\n                //this is road\n                if (inter.width == 80) {\n                  var lc = 0;\n                  var ld = 0;\n                  for (var v = 0; v < cars.length; v++) {\n                    if (\n                      cars[v].x == inter.x + 36 &&\n                      cars[v].y < inter.y &&\n                      cars[v].s == 0\n                    ) {\n                      lc++;\n                    }\n                    if (\n                      cars[v].x == c.x &&\n                      cars[v].y < inter.y &&\n                      cars[v].s == 0\n                    ) {\n                      ld++;\n                    }\n                  }\n                  if (ld - 1 > lc) {\n                    c.x = inter.x + 36;\n                    c.s = 0;\n                  } else {\n                    c.s = 0;\n                  }\n                  var dc = distance_check(c, c2, 'y');\n                  if (dc == true) {\n                    c.s = 0;\n                  }\n                } else {\n                  c.s = 0;\n                }\n              }\n            }\n          } else {\n            var counter = 0;\n            for (var k = 0; k < intersections_arr.length; k++) {\n              var inter = intersections_arr[k];\n              if (check_inter(c, inter, 'y')) {\n                counter++;\n                if (inter.top == 'rgba(255,0,0,0.4)') {\n                  //red\n                  c.s = 0;\n                } else {\n                  //green\n                  c.s = 5;\n                  //figure dir\n                  gen_dir(c, inter);\n                }\n              }\n            }\n            if (counter == 0) {\n              //car past intersection reset random generator\n              c.dd = false;\n            }\n          }\n        }\n        if (c.y - 26 >= h) {\n          //reposition car\n          c.y = 368;\n          c.x = w + 25;\n          c.d = 'w';\n          c.y += c.s;\n        }\n        c.y += c.s;\n      } else if (c.d == 'w') {\n        for (var l = 0; l < cars.length; l++) {\n          var c2 = cars[l];\n          var dc = distance_check(c, c2, '-x');\n          if (dc == true) {\n            c.s = 0;\n            for (var k = 0; k < intersections_arr.length; k++) {\n              var inter = intersections_arr[k];\n              if (inter.y + inter.height > c.y && inter.y < c.y) {\n                //this is road\n                if (inter.height == 80) {\n                  var lc = 0;\n                  var ld = 0;\n                  for (var v = 0; v < cars.length; v++) {\n                    if (\n                      cars[v].y == inter.y + 22 &&\n                      cars[v].x > inter.x &&\n                      cars[v].s == 0\n                    ) {\n                      lc++;\n                    }\n                    if (\n                      cars[v].y == c.y &&\n                      cars[v].x > inter.x &&\n                      cars[v].s == 0\n                    ) {\n                      ld++;\n                    }\n                  }\n                  if (ld - 2 > lc) {\n                    c.y = inter.y + 22;\n                    c.s = 0;\n                  } else {\n                    c.s = 0;\n                  }\n                  var dc = distance_check(c, c2, '-x');\n                  if (dc == true) {\n                    c.s = 0;\n                  }\n                } else {\n                  c.s = 0;\n                }\n              }\n            }\n          } else {\n            var counter = 0;\n            for (var k = 0; k < intersections_arr.length; k++) {\n              var inter = intersections_arr[k];\n              if (check_inter(c, inter, '-x')) {\n                counter++;\n                if (inter.right == 'rgba(255,0,0,0.4)') {\n                  //red\n                  c.s = 0;\n                } else {\n                  //green\n                  c.s = 5;\n                  //figure dir\n                  gen_dir(c, inter);\n                }\n              }\n            }\n            if (counter == 0) {\n              //car past intersection reset random generator\n              c.dd = false;\n            }\n          }\n        }\n        // 车辆离开视图\n        if (c.x + 26 <= 0) {\n          //reposition car\n          c.y = 444;\n          c.x = -25;\n          c.d = 'e';\n          c.y -= c.s;\n        }\n        c.x -= c.s;\n      }\n      c.draw();\n    }\n  }\n\n  Object.getPrototypeOf(ctx).rounded_rect = function(x, y, w, h, r) {\n    if (typeof r === 'undefined') {\n      r = 2;\n    }\n    this.beginPath();\n    this.moveTo(x + r, y);\n    this.lineTo(x + w - r, y);\n    this.quadraticCurveTo(x + w, y, x + w, y + r);\n    this.lineTo(x + w, y + h - r);\n    this.quadraticCurveTo(x + w, y + h, x + w - r, y + h);\n    this.lineTo(x + r, y + h);\n    this.quadraticCurveTo(x, y + h, x, y + h - r);\n    this.lineTo(x, y + r);\n    this.quadraticCurveTo(x, y, x + r, y);\n    this.closePath();\n    this.fill();\n  };\n\n  // 绘制车辆\n  function drawcar() {\n    this.x = 0;\n    this.y = 0;\n    this.s = 5;\n    this.l = 25; //length of vehicle\n    this.d = 'e';\n    this.dd = false;\n    this.color = '#F5D600';\n\n    this.draw = function() {\n      ctx.fillStyle = this.color;\n      if (this.d == 'w') {\n        this.w = 25;\n        ctx.rounded_rect(this.x, this.y, this.l, 12);\n        ctx.fillStyle = '#99B3CE';\n        ctx.fillRect(this.x + 5, this.y, 5, 12);\n        ctx.fillRect(this.x + 18, this.y, 2, 12);\n        ctx.fillStyle = this.color;\n        ctx.fillRect(this.x + 6, this.y - 2, 2, 2);\n        ctx.fillRect(this.x + 6, this.y + 12, 2, 2);\n      } else if (this.d == 'e') {\n        this.w = 25;\n        ctx.rounded_rect(this.x, this.y, this.l, 12);\n        ctx.fillStyle = '#99B3CE';\n        ctx.fillRect(this.x + 15, this.y, 5, 12);\n        ctx.fillRect(this.x + 4, this.y, 2, 12);\n        ctx.fillStyle = this.color;\n        ctx.fillRect(this.x + 14, this.y - 2, 2, 2);\n        ctx.fillRect(this.x + 14, this.y + 12, 2, 2);\n      } else if (this.d == 's') {\n        this.w = 12;\n        ctx.rotate(Math.PI / 2);\n        ctx.rounded_rect(this.y, -this.x, this.l, 12);\n        ctx.fillStyle = '#99B3CE';\n        ctx.fillRect(this.y + 15, -this.x, 5, 12);\n        ctx.fillRect(this.y + 4, -this.x, 2, 12);\n        ctx.fillStyle = this.color;\n        ctx.fillRect(this.y + 14, -this.x - 2, 2, 2);\n        ctx.fillRect(this.y + 14, -this.x + 12, 2, 2);\n        ctx.rotate(-Math.PI / 2);\n      } else {\n        this.w = 12;\n        ctx.rotate(Math.PI / 2);\n        ctx.rounded_rect(this.y, -this.x, this.l, 12);\n        ctx.fillStyle = '#99B3CE';\n        ctx.fillRect(this.y + 5, -this.x, 5, 12);\n        ctx.fillRect(this.y + 18, -this.x, 2, 12);\n        ctx.fillStyle = this.color;\n        ctx.fillRect(this.y + 6, -this.x - 2, 2, 2);\n        ctx.fillRect(this.y + 6, -this.x + 12, 2, 2);\n        ctx.rotate(-Math.PI / 2);\n      }\n    };\n  }\n\n  // 信号灯\n  function drawinter() {\n    this.x = 0;\n    this.y = 0;\n    this.width = 0;\n    this.height = 0;\n    this.roadtop = true;\n    this.roadleft = true;\n    this.roadbottom = true;\n    this.roadright = true;\n    if (left_green == true) {\n      this.right = 'rgba(0,255,0,0.4)';\n      this.left = 'rgba(0,255,0,0.4)';\n      this.top = 'rgba(255,0,0,0.4)';\n      this.bottom = 'rgba(255,0,0,0.4)';\n    } else {\n      this.right = 'rgba(255,0,0,0.4)';\n      this.left = 'rgba(255,0,0,0.4)';\n      this.top = 'rgba(0,255,0,0.4)';\n      this.bottom = 'rgba(0,255,0,0.4)';\n    }\n\n    this.draw = function() {\n      ctx.fillStyle = '#605A4C';\n      ctx.fillRect(this.x, this.y, this.width, this.height);\n\n      //zebra-crossing (left)\n      if (this.roadleft == true) {\n        ctx.fillStyle = '#605A4C';\n        ctx.fillRect(this.x - 20, this.y, 20, this.height);\n        ctx.beginPath();\n        ctx.setLineDash([1, 5]);\n        ctx.moveTo(this.x - 12, this.y);\n        ctx.lineTo(this.x - 12, this.y + this.height);\n        ctx.closePath();\n        ctx.strokeStyle = '#A09383';\n        ctx.lineWidth = 10;\n        ctx.fill();\n        ctx.stroke();\n\n        ctx.fillStyle = '#A09383';\n        ctx.fillRect(\n          this.x - 22,\n          this.height / 2 + this.y - 1,\n          2,\n          this.height / 2 + 1\n        );\n        if (this.height > 40) {\n          ctx.fillStyle = '#A09383';\n          ctx.fillRect(this.x - 52, this.height / (4 / 3) + this.y - 2, 30, 2);\n        }\n      }\n      //zebra-crossing (right)\n      if (this.roadright == true) {\n        ctx.fillStyle = '#605A4C';\n        ctx.fillRect(this.x + this.width, this.y, 22, this.height);\n        ctx.beginPath();\n        ctx.setLineDash([1, 5]);\n        ctx.moveTo(this.x + this.width + 12, this.y);\n        ctx.lineTo(this.x + this.width + 12, this.y + this.height);\n        ctx.closePath();\n        ctx.strokeStyle = '#A09383';\n        ctx.lineWidth = 10;\n        ctx.fill();\n        ctx.stroke();\n\n        ctx.fillStyle = '#A09383';\n        ctx.fillRect(this.x + this.width + 22, this.y, 2, this.height / 2 + 1);\n        if (this.height > 40) {\n          ctx.fillStyle = '#A09383';\n          ctx.fillRect(\n            this.x + this.width + 22,\n            this.height / 4 + this.y - 2,\n            30,\n            2\n          );\n        }\n      }\n      //zebra-crossing (top)\n      if (this.roadtop == true) {\n        ctx.fillStyle = '#605A4C';\n        ctx.fillRect(this.x, this.y - 20, this.width, 20);\n        ctx.beginPath();\n        ctx.setLineDash([1, 5]);\n        ctx.moveTo(this.x, this.y - 12);\n        ctx.lineTo(this.x + this.width, this.y - 12);\n        ctx.closePath();\n        ctx.strokeStyle = '#A09383';\n        ctx.lineWidth = 10;\n        ctx.fill();\n        ctx.stroke();\n\n        ctx.fillStyle = '#A09383';\n        ctx.fillRect(this.x, this.y - 21, this.width / 2 + 1, 2);\n        if (this.width > 40) {\n          ctx.fillStyle = '#A09383';\n          ctx.fillRect(this.x + this.width / 4 - 2, this.y - 50, 2, 30);\n        }\n      }\n      //zebra-crossing (bottom)\n      if (this.roadbottom == true) {\n        ctx.fillStyle = '#605A4C';\n        ctx.fillRect(this.x, this.y + this.height, this.width, 20);\n        ctx.beginPath();\n        ctx.setLineDash([1, 5]);\n        ctx.moveTo(this.x, this.y + this.height + 12);\n        ctx.lineTo(this.x + this.width, this.y + this.height + 12);\n        ctx.closePath();\n        ctx.strokeStyle = '#A09383';\n        ctx.lineWidth = 10;\n        ctx.fill();\n        ctx.stroke();\n\n        ctx.fillStyle = '#A09383';\n        ctx.fillRect(\n          this.x + this.width - this.width / 2 - 1,\n          this.y + this.height + 20,\n          this.width / 2 + 1,\n          2\n        );\n        if (this.width > 40) {\n          ctx.fillStyle = '#A09383';\n          ctx.fillRect(\n            this.x + this.width / (4 / 3) - 2,\n            this.y + this.height + 20,\n            2,\n            30\n          );\n        }\n      }\n\n      //traffic lights (left)\n      if (this.roadleft == true) {\n        ctx.save();\n\n        if (this.left == 'rgba(0,255,0,0.4)') {\n          //green\n          var shadow_color = 'rgba(0,255,0,1)';\n        } else {\n          var shadow_color = 'rgba(255,0,0,1)';\n        }\n\n        ctx.fillStyle = shadow_color;\n        ctx.shadowColor = shadow_color;\n        ctx.shadowOffsetX = -2;\n        ctx.shadowBlur = 2;\n        ctx.fillRect(this.x - 3, this.y + this.height - 12, 1, 4);\n        ctx.fill();\n        ctx.restore();\n        ctx.shadowOffsetX = undefined;\n        ctx.shadowBlur = undefined;\n\n        if (this.height > 40) {\n          ctx.save();\n          if (this.left == 'rgba(0,255,0,0.4)') {\n            //green\n            var shadow_color = 'rgba(0,255,0,1)';\n          } else {\n            var shadow_color = 'rgba(255,0,0,1)';\n          }\n\n          ctx.fillStyle = shadow_color;\n          ctx.shadowColor = shadow_color;\n          ctx.shadowOffsetX = -2;\n          ctx.shadowBlur = 2;\n          ctx.fillRect(this.x - 3, this.y + this.height - 30, 1, 4);\n          ctx.fill();\n          ctx.restore();\n          ctx.shadowOffsetX = undefined;\n          ctx.shadowBlur = undefined;\n        }\n\n        ctx.fillStyle = '#ddd';\n        ctx.fillRect(\n          this.x - 3,\n          this.y + this.height - this.height / 2 + 3,\n          1,\n          this.height / 2\n        );\n      }\n      //traffic lights (right)\n      if (this.roadright == true) {\n        ctx.save();\n        if (this.right == 'rgba(0,255,0,0.4)') {\n          //green\n          var shadow_color = 'rgba(0,255,0,1)';\n        } else {\n          var shadow_color = 'rgba(255,0,0,1)';\n        }\n\n        ctx.fillStyle = shadow_color;\n        ctx.shadowColor = shadow_color;\n        ctx.shadowOffsetX = 2;\n        ctx.shadowBlur = 2;\n        ctx.fillRect(this.x + this.width + 2, this.y + 12, 1, 4);\n        ctx.fill();\n        ctx.restore();\n        ctx.shadowOffsetX = undefined;\n        ctx.shadowBlur = undefined;\n\n        if (this.height > 40) {\n          ctx.save();\n          if (this.right == 'rgba(0,255,0,0.4)') {\n            //green\n            var shadow_color = 'rgba(0,255,0,1)';\n          } else {\n            var shadow_color = 'rgba(255,0,0,1)';\n          }\n\n          ctx.fillStyle = shadow_color;\n          ctx.shadowColor = shadow_color;\n          ctx.shadowOffsetX = 2;\n          ctx.shadowBlur = 2;\n          ctx.fillRect(this.x + this.width + 2, this.y + 30, 1, 4);\n          ctx.fill();\n          ctx.restore();\n          ctx.shadowOffsetX = undefined;\n          ctx.shadowBlur = undefined;\n        }\n\n        ctx.fillStyle = '#ddd';\n        ctx.fillRect(this.x + this.width + 2, this.y - 3, 1, this.height / 2);\n      }\n      //traffic lights (top)\n      if (this.roadtop == true) {\n        ctx.save();\n        if (this.top == 'rgba(0,255,0,0.4)') {\n          //green\n          var shadow_color = 'rgba(0,255,0,1)';\n        } else {\n          var shadow_color = 'rgba(255,0,0,1)';\n        }\n\n        ctx.fillStyle = shadow_color;\n        ctx.shadowColor = shadow_color;\n        ctx.shadowOffsetY = -2;\n        ctx.shadowBlur = 2;\n        ctx.fillRect(this.x + 4, this.y - 2, 4, 1);\n        ctx.fill();\n        ctx.restore();\n        ctx.shadowOffsetX = undefined;\n        ctx.shadowBlur = undefined;\n\n        if (this.width > 40) {\n          ctx.save();\n          if (this.top == 'rgba(0,255,0,0.4)') {\n            //green\n            var shadow_color = 'rgba(0,255,0,1)';\n          } else {\n            var shadow_color = 'rgba(255,0,0,1)';\n          }\n\n          ctx.fillStyle = shadow_color;\n          ctx.shadowColor = shadow_color;\n          ctx.shadowOffsetY = -2;\n          ctx.shadowBlur = 2;\n          ctx.fillRect(this.x + 28, this.y - 2, 4, 1);\n          ctx.fill();\n          ctx.restore();\n          ctx.shadowOffsetX = undefined;\n          ctx.shadowBlur = undefined;\n        }\n\n        ctx.fillStyle = '#ddd';\n        ctx.fillRect(this.x - 3, this.y - 2, this.width / 2, 1);\n      }\n      //traffic lights (bottom)\n      if (this.roadbottom == true) {\n        ctx.save();\n        if (this.bottom == 'rgba(0,255,0,0.4)') {\n          //green\n          var shadow_color = 'rgba(0,255,0,1)';\n        } else {\n          var shadow_color = 'rgba(255,0,0,1)';\n        }\n\n        ctx.fillStyle = shadow_color;\n        ctx.shadowColor = shadow_color;\n        ctx.shadowOffsetY = 2;\n        ctx.shadowBlur = 2;\n        ctx.fillRect(this.x + this.width - 10, this.y + this.height + 2, 4, 1);\n        ctx.fill();\n        ctx.restore();\n        ctx.shadowOffsetX = undefined;\n        ctx.shadowBlur = undefined;\n\n        if (this.width > 40) {\n          ctx.save();\n          if (this.bottom == 'rgba(0,255,0,0.4)') {\n            //green\n            var shadow_color = 'rgba(0,255,0,1)';\n          } else {\n            var shadow_color = 'rgba(255,0,0,1)';\n          }\n\n          ctx.fillStyle = shadow_color;\n          ctx.shadowColor = shadow_color;\n          ctx.shadowOffsetY = 2;\n          ctx.shadowBlur = 2;\n          ctx.fillRect(\n            this.x + this.width - 32,\n            this.y + this.height + 2,\n            4,\n            1\n          );\n          ctx.fill();\n          ctx.restore();\n          ctx.shadowOffsetX = undefined;\n          ctx.shadowBlur = undefined;\n        }\n\n        ctx.fillStyle = '#ddd';\n        ctx.fillRect(\n          this.x + this.width / 2 + 3,\n          this.y + this.height + 2,\n          this.width / 2,\n          1\n        );\n      }\n    };\n  }\n\n  // 交叉口\n  function intersections() {\n    for (var i = 0; i < roads.length; i++) {\n      var r1 = roads[i];\n      for (var j = 0; j < roads.length; j++) {\n        var r2 = roads[j];\n        if (r1.width > r1.height) {\n          if (r2.width < r2.height) {\n            if (r1.x + r1.width > r2.x && r1.x <= r2.x) {\n              if (r2.y + r2.height >= r1.y && r2.y <= r1.y) {\n                //console.log(\"intersection found at (\"+r1.y+\",\"+r2.x+\")\");\n                var roadtop = true;\n                var roadbottom = true;\n                var roadleft = true;\n                var roadright = true;\n                if (r1.y == r2.y) {\n                  //no intersection top\n                  var roadtop = false;\n                }\n                if (r1.x == r2.x) {\n                  //no intersection left\n                  var roadleft = false;\n                }\n                if (r1.x + r1.width == r2.x + r2.width) {\n                  //no intersection right\n                  var roadright = false;\n                }\n                if (r1.y + r1.height == r2.y + r2.height) {\n                  //no intersection top\n                  var roadbottom = false;\n                }\n\n                var inter = new drawinter();\n                (inter.x = r2.x),\n                  (inter.y = r1.y),\n                  (inter.width = r2.width),\n                  (inter.height = r1.height),\n                  (inter.roadtop = roadtop),\n                  (inter.roadleft = roadleft),\n                  (inter.roadright = roadright),\n                  (inter.roadbottom = roadbottom);\n                intersections_arr.push(inter);\n                inter.draw();\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n\n  // 绘制道路\n  function drawroad() {\n    this.x = 0;\n    this.y = 0;\n    this.width = 0;\n    this.height = 0;\n    this.color = '#605A4C';\n\n    this.draw = function() {\n      ctx.fillStyle = this.color;\n      ctx.fillRect(this.x, this.y, this.width, this.height);\n\n      ctx.fillStyle = '#A68B44';\n      if (this.width < this.height && this.width > 40) {\n        ctx.fillRect(this.x + (this.width / 2 - 1), this.y, 2, this.height);\n\n        ctx.beginPath();\n        ctx.setLineDash([2, 5]);\n        ctx.moveTo(this.x + (this.width / 4 - 1), this.y);\n        ctx.lineTo(this.x + (this.width / 4 - 1), this.y + this.height);\n        ctx.closePath();\n        ctx.strokeStyle = '#A09383';\n        ctx.lineWidth = 1;\n        ctx.fill();\n        ctx.stroke();\n\n        ctx.beginPath();\n        ctx.setLineDash([2, 5]);\n        ctx.moveTo(this.x + (this.width / (4 / 3) - 1), this.y);\n        ctx.lineTo(this.x + (this.width / (4 / 3) - 1), this.y + this.height);\n        ctx.closePath();\n        ctx.strokeStyle = '#A09383';\n        ctx.lineWidth = 1;\n        ctx.fill();\n        ctx.stroke();\n\n        ctx.fillStyle = '#A09383';\n        ctx.fillRect(this.x - 10, this.y, 10, this.height);\n        ctx.fillStyle = '#A09383';\n        ctx.fillRect(this.x + this.width, this.y, 10, this.height);\n      } else if (this.width > this.height && this.height > 40) {\n        ctx.fillRect(this.x, this.y + (this.height / 2 - 1), this.width, 2);\n\n        ctx.beginPath();\n        ctx.setLineDash([2, 5]);\n        ctx.moveTo(this.x, this.y + (this.height / 4 - 1));\n        ctx.lineTo(this.x + this.width, this.y + (this.height / 4 - 1));\n        ctx.closePath();\n        ctx.strokeStyle = '#A09383';\n        ctx.lineWidth = 1;\n        ctx.fill();\n        ctx.stroke();\n\n        ctx.beginPath();\n        ctx.setLineDash([2, 5]);\n        ctx.moveTo(this.x, this.y + (this.height / (4 / 3) - 1));\n        ctx.lineTo(this.x + this.width, this.y + (this.height / (4 / 3) - 1));\n        ctx.closePath();\n        ctx.strokeStyle = '#A09383';\n        ctx.lineWidth = 1;\n        ctx.fill();\n        ctx.stroke();\n\n        ctx.fillStyle = '#A09383';\n        ctx.fillRect(this.x, this.y - 10, this.width, 10);\n        ctx.fillStyle = '#A09383';\n        ctx.fillRect(this.x, this.y + this.height, this.width, 10);\n      } else if (this.width > this.height && this.height < 41) {\n        ctx.fillRect(this.x, this.y + (this.height / 2 - 1), this.width, 2);\n        ctx.fillStyle = '#A09383';\n        ctx.fillRect(this.x, this.y - 10, this.width, 10);\n        ctx.fillStyle = '#A09383';\n        ctx.fillRect(this.x, this.y + this.height, this.width, 10);\n      } else if (this.width < this.height && this.width < 41) {\n        ctx.fillRect(this.x + (this.width / 2 - 1), this.y, 2, this.height);\n        ctx.fillStyle = '#A09383';\n        ctx.fillRect(this.x - 10, this.y, 10, this.height);\n        ctx.fillStyle = '#A09383';\n        ctx.fillRect(this.x + this.width, this.y, 10, this.height);\n      }\n    };\n  }\n\n  function animloop() {\n    drawscene();\n    requestAnimFrame(animloop);\n  }\n\n  init();\n  animloop();\n}\n"]}